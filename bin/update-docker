#!/usr/bin/env bash

DOWNLOADS_PATH=${DOWNLOADS_PATH:-"$HOME/downloads"}

mkdir -p $DOWNLOADS_PATH

echo "created $DOWNLOADS_PATH directory"

ls -la $DOWNLOADS_PATH

if [[ -e $DOWNLOADS_PATH/mochitest-runner.tar ]]; then
  echo "about to load!"
  time docker load -i $DOWNLOADS_PATH/mochitest-runner.tar;
  echo "loaded docker image"
fi

docker images

time docker pull jlongster/mochitest-runner

docker images

time docker save jlongster/mochitest-runner > $DOWNLOADS_PATH/mochitest-runner.tar

ls -la $DOWNLOADS_PATH

echo "saved docker image to $DOWNLOADS_PATH"
